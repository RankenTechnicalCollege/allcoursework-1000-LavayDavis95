<!DOCTYPE html>
<html>
<head>
   <!--
      JavaScript

      Author: 
      Date:   

      Filename: index.htm
   -->
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
   <title>Hands-on Project 7-3</title>
   <link rel="stylesheet" href="styles.css" />
   <script src="modernizr.custom.05819.js"></script>
</head>

<body>
   <header>
      <h1>
         Hands-on Test Chapter 4
         <p id="currentDate"></p>
      </h1>
   </header>

   <article>
      <h2>Steam Game Sale</h2>
      <form>
         <input type="checkbox" id="item1" value="1999" />
         <label for="item1">Counter Strike ($19.99)</label>
         <input type="checkbox" id="item2" value="2999" />
         <label for="item2">Dark Souls III ($29.99)</label>
         <input type="checkbox" id="item3" value="1349" />
         <label for="item3">Enter The Gungeon ($13.49)</label>
         <input type="checkbox" id="item4" value="499" />
         <label for="item4">Hover Junkers ($4.99)</label>
         <input type="checkbox" id="item5" value="899" /><!--ii.value was at 599 i changed it to 899 to match-->
         <label for="item5">Good Robot ($8.99)</label>
         <input type="button" value="Calculate" id="sButton" /><!--i.id didn't match with the script-->
      </form>
      <table>
         <colgroup>
            <col class="label" />
            <col class="amount" />
         </colgroup>
         <tbody>
            <tr>
               <td>Item total</td>
               <td id="itemTotal">0.00</td> <!--vi.added id's so the script can use it as a reference-->
            </tr>
            <tr>
               <td>Tax</td>
               <td id="tax">0.00</td>
            </tr>
            <tr>
               <td>Total with tax</td>
               <td id="totalWithTax">$0.00</td>
            </tr>
         </tbody>
      </table>
   </article>
   <script>
	  "use strict";
	  // function to add values of selected check boxes and display total
     function $(id) {
      return document.getElementById(id);
     }

     function displayDate() {
      const today = new Date();
      const options = { weekday:'short',year:'numeric',month:'short',day:'numeric'};
      $('currentDate').innerText = today.toLocaleDateString("en-US", options);
      }
      displayDate();
      //iii.The tax had a value of 10% so I changed the value to itemTotal * taxRate
      //iii.taxRate has a value of 0.05
      //iv.Changed the variable taxTotal and used tax and totalWithTax

      //v.the 'calcTotal' is now referenced for the eventListener
      function calcTotal() {
         var itemTotal = 0;
         const taxRate = 0.05;
         const items = document.querySelectorAll("input[type='checkbox']");
         items.forEach(item=> {
            if (item.checked) {
               itemTotal+= parseInt(item.value);
            }
         });
         const tax = itemTotal * taxRate;
         const totalWithTax = itemTotal + tax;
         //vi.this updates the values on the webpage
         $('itemTotal').innerText = (itemTotal / 100).toFixed(2);
         $('tax').innerText = (tax / 100).toFixed(2);
         $('totalWithTax').innerText = "$" + (totalWithTax / 100).toFixed(2);

         items.forEach(item=> item.checked = false);
      }
      //i.submit button id's didn't match
      $('sButton').addEventListener("click", calcTotal); 
    
   </script>
</body>
</html>
